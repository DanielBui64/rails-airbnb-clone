<div class="container mt-3">
  <div class="row row-cols-2 mb-3">
    <div class="col"><h1>My Boats</h1></div>
    <div class="col text-end"><%= link_to 'Add New Boat', new_boat_path, class:"btn btn-outline-success" %></div>
  </div>
  <div class="row row-cols-1 row-cols-md-4 g-4">
    <% @boats.each do |boat| %>
      <div class="col">
        <div class="card">
          <%= link_to boat_path(boat) do %>
            <% if boat.photos %>
              <% boatCount = boat.photos.count-1 %>
              <% if boat.photos.count > 1 %>
                <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                  <div class="carousel-indicators">
                      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <% boatCount.times do |i| %>
                      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to=<% "#{i + 1}" %> aria-current="true" aria-label=<% "Slide #{i + 2}" %>></button>
                      <%# how to add <class="active"> %>
                      <%# <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button> %>
                      <%# <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button> %>
                    <% end %>
                  </div>
                  <div class="carousel-inner" style=" width:100%; height: 400px !important;">
                    <% boat.photos.each do |photo| %>
                      <div class="carousel-item active">
                        <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, :alt=>"Casual Jacket" %>
                      <img src="<% cl_image_path photo.key %>" class="d-block w-100" alt="...">

                      </div>
                    <% end %>
                      <%# <img src="https://images.unsplash.com/photo-1593351415075-3bac9f45c877?ixlib=rb-1.2.1&ixid=MnwxM[â€¦]90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2942&q=80" class="d-block w-100" alt="sunset-boat"> %>
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
              <% end %>
              <%# if boat.photos %>
                <%# boat.photos.each do |photo| %>
                  <%#= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, :alt=>"Casual Jacket" %>
                <%# end %>
            <% else %>
              <img src="https://electrek.co/wp-content/uploads/sites/3/2021/09/duck-boat-header.jpg" class="card-img-top" alt="boat parked">
            <% end %>

            <%# if boat.photo.key %>
              <%# <div class="card-img-top"> %>
                <%#= cl_image_tag boat.photo.key, width: 400, height:200, crop: :fill, :alt=>"Casual Jacket" %>
              <%# </div> %>
            <%# else %>
              <%# <img class="card-img-top" src="https://electrek.co/wp-content/uploads/sites/3/2021/09/duck-boat-header.jpg" class="card-img-top" alt="boat parked"> %>
            <%# end %>
          <% end %>
          <div class="card-body">
            <h5 class="card-title"><%= boat.name %></h5>
            <p class="card-text"><%= boat.description %></p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Price: $<%= boat.price_per_day %>/day</li>
          </ul>
          <div class="card-footer">
            <div class="row g-3">
              <div class="d-grid gap-2 col-6 mx-auto">
                <%= link_to 'Edit', edit_boat_path(boat), class:"btn btn-outline-primary" %>
              </div>
              <div class="d-grid gap-2 col-6 mx-auto">
                <%= link_to 'Remove', boat_path(boat), method: :delete, data: { confirm: "Remove boat ?" }, class:"btn btn-outline-danger" %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>


</div>
